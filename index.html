<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <title>WepSim</title>

    <!-- Required Stylesheets -->
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css"/>
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="external/codemirror/codemirror.css">

    <!-- Required scripts -->
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/babel-polyfill@latest/dist/polyfill.min.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://peterolson.github.io/BigInteger.js/BigInteger.min.js"></script>

    <script src="external/codemirror/codemirror.js"></script>
    <script src="external/codemirror/keymap/vim.js"></script>
    <script src="external/codemirror/keymap/sublime.js"></script>
    <script src="external/codemirror/mode/gas/gas.js"></script>
    <script src="external/codemirror/mode/javascript/javascript.js"></script>
  </head>

  <body>
    <div id="app">
      <template>
        <header>
          <!-- 1 navbar -->
          <b-navbar toggleable="sm" class="header">

            <b-navbar-toggle target="nav_collapse"></b-navbar-toggle>

            <b-navbar-brand href="#" style="color: #2196F3;"><h5>WepSim <b-badge pill variant="secondary"> 1.0 </b-badge></h5></b-navbar-brand>

            <b-navbar-nav>
                <b-nav-text style="color: #2196F3;"><h5>{{architecture_name}}</h5></b-nav-text>
            </b-navbar-nav>

            <b-collapse is-nav id="nav_collapse">

              <b-navbar-nav class="ml-auto">
                <b-nav-item href="#"><img alt="ARCOS logo" src="./images/arcos.svg" style="height:30pt"></b-nav-item>
                <b-nav-item href="#"><img alt="Computer Science and Engineering Departament logo" src="./images/dptoinf.png" style="height:30pt"></b-nav-item>
              </b-navbar-nav>

            </b-collapse>
          </b-navbar>
        </header>

        <b-alert :show="dismissCountDown" dismissible :variant="type" @dismissed="dismissCountDown=0" @dismiss-count-down="countDownChanged" class="principalAlert">
        	<span class="fa fa-info-circle"></span> {{alertMessaje}}
		    </b-alert>

        <div class="contenedor row menu_cards" id="architecture_menu">
      		<!-- 2 navbar -->
          <div class="contenedor menu row">
            <div class="col-lg-3 col-sm-12 nopadding">
              <div class="col-lg-12 col-sm-12">
                <div class="col-lg-12 col-sm-12 buttons row">
                  <div class="col-lg-6 col-sm-6 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm assembly_btn btn_arch" id="assembly_btn_arch" style="display:none;">Assembly</b-button>
                  </div>
                  <div class="col-lg-6 col-sm-6 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm simulator_btn btn_arch" id="sim_btn_arch" style="display:none;">Simulator</b-button>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-6 col-sm-12 nopadding">
							
            </div>

            <div class="col-lg-3 col-sm-12 nopadding">
            	<div class="col-lg-12 col-sm-12">
                <div class="col-lg-12 col-sm-12 buttons row">
                	<div class="col-lg-6 col-sm-6 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm" id="conf_btn_arch"><span class="fa fa-gear"></span> Configuration</b-button>
                  </div>
              		<div class="col-lg-6 col-sm-6 buttons">
                		<b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm" id="help_arch" style="background-color:#D4DB17;"><span class="fa fa-exclamation-circle"></span> Help</b-button>
              		</div>
            		</div>
              </div>
            </div>
          </div>

        	<div class="contenedor menu row">
            <div class="col-lg-12 col-sm-12" id="load_menu_arch">
              <div class="col-lg-12 col-sm-12 row nopadding nomargin">
                <div class="col-lg-1 col-sm-1"></div>
                <div class="col-lg-10 col-sm-10">
                  <b-card-group deck>
                    <b-card :title=item.name title-tag="h6" :img-src=item.img :img-alt=item.alt img-top v-for="(item, index) in arch_available" @click="load_arch_select(item.name)" @mouseover="change_background(item.name, 1)" @mouseout="change_background(item.name, 0)" :border-variant=back_card[index].background style="cursor: pointer;">
                        <small class="card-text">
                          This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </small>
                    </b-card>
                  </b-card-group>
                </div>
                <div class="col-lg-1 col-sm-1"></div>
              </div>
              <br>
              <h5>Select the architecture to load:</h5>
              <div class="col-lg-12 col-sm-12" style="margin-bottom: 3%;">
                <div class="col-lg-12 col-sm-12">
                  <b-form-file v-model="load_arch" placeholder="Choose a file..." id="arch_file" accept=".json" @change="read_arch"></b-form-file>
                </div>
              </div>
            </div>

            <div class="col-lg-12 col-sm-12 row" id="save_menu_arch" style="display:none;">
              <div class="col-lg-3 col-sm-12">
                <div class="col-lg-12 col-sm-12">
                  <h6>Select action:</h6>
                  <b-button class="btn btn-outline-secondary btn-block btn-sm buttonBackground save_arch" id="save_arch_save" style="background-color:#c2c2c2;" disabled><span class="fa fa-download"></span> Save</b-button>
                  <b-button class="btn btn-outline-secondary btn-block btn-sm buttonBackground view_arch" id="view_arch_save">View Architecture</b-button>
                  <br>
                </div>
              </div>
              <div class="col-lg-9 col-sm-12">
                <div class="col-lg-12 col-sm-12">
                  <h6>Enter the name of the architecture to save:</h6>
                  <br>
                  <div class="col-lg-12 col-sm-12 row">
                    <div class="col-lg-8 col-sm-8">
                      <b-form-input v-model="name_arch_save" type="text" placeholder="Enter the name" class="form-control border border-secondary form-control-sm" style="background-color: white; color: black,"></b-form-input>
                      <br>
                    </div>
                    <div class="col-lg-4 col-sm-4">
                      <b-button class="btn btn-primary btn-block btn-sm" id="btn_save_arch" @click="arch_save"><span class="fa fa-download"></span> Save</b-button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-12 col-sm-12 row" id="view_components" style="display:none;">
              <div class="col-lg-3 col-sm-12">
                <div class="col-lg-12 col-sm-12">
                  <h6>Select action:</h6>
                  <b-button class="btn btn-outline-secondary btn-block btn-sm buttonBackground save_arch" id="save_arch_view"><span class="fa fa-download"></span> Save</b-button>
                  <b-button class="btn btn-outline-secondary btn-block btn-sm buttonBackground view_arch" id="view_arch_view" style="background-color:#c2c2c2;" disabled>View Architecture</b-button>
                  <br>
                </div>
              </div>
              <div class="col-lg-9 col-sm-12">
                <div class="col-lg-12 col-sm-12">
                  <b-tabs>
                    <b-tab title="Components" active>
                      <br>
                      <h6>Components of the architecture:</h6>

                      <div class="col-lg-12 col-sm-12 row">
                        <div class="compMenu">
                          <b-button class="btn btn-outline-secondary btn-sm buttonBackground" id="newComponentBtn" v-b-modal.new_component> <span class="fa fa-plus-circle"></span> New component</b-button>
                        </div>

                        <div class="compMenu">
                          <b-button class="btn btn-outline-danger btn-sm buttonBackground" id="resetArchitecture" @click="resetArchModal(architecture_name, $event)"> <span class="fa fa-power-off"></span> Reset architecture</b-button>
                        </div>

                        <div class="compMenu">
                          <b-form-input v-model="number_bits" type="number" min="1" placeholder="Enter the number of bits" class="form-control border border-secondary form-control-sm buttonBackground"  style="background-color: white; color: black;"></b-form-input>
                        </div>
                      </div>

                      <!-- Resetea las instrucciones -->
                      <b-modal id ="modalResetArch" :title="modalResetArch.title" ok-variant="danger" ok-title="Reset" @ok="resetArchitecture(modalResetArch.element)">
                        <h6>Are you sure you want to reset the architecture?</h6>
                      </b-modal >
                      
                      <div class="col-lg-12 col-sm-12">
                        <br>
                        <div class="col-lg-12 col-sm-12" v-for="item in architecture_hash">
                          <b-card no-body class="mb-1">
                            <b-card-header header-tag="header" class="p-1" role="tab">
                              <b-btn block href="#" v-b-toggle="item.index.toString()" class="btn btn-outline-secondary btn-sm buttonBackground">{{item.name}}</b-btn>
                            </b-card-header>
                            <b-collapse :id="item.index.toString()" visible accordion="my-accordion" role="tabpanel" class="architecture-scroll-y">
                              <b-card-body>
                                 <b-table :items="architecture.components[item.index].elements" :fields="archFields" v-if="architecture.components[item.index].elements.length > 0">
                                  <template slot="actions" slot-scope="row">
                                    <b-button @click.stop="editElemModal(row.item.name, item.index, $event.target)" class="btn btn-outline-secondary btn-sm buttonBackground"><span class="fa fa-edit"></span> Edit</b-button>
                                    <b-button @click.stop="delElemModal(row.item.name, $event.target)" class="btn btn-outline-danger btn-sm buttonBackground"><span class="fa fa-trash-o"></span> Delete</b-button> 
                                  </template>
                                 </b-table>

                                <b-button class="btn btn-outline-secondary btn-sm buttonBackground" :id="'new '+item.name" @click="newElemModal(item.name, item.index, $event.target)"> <span class="fa fa-plus-circle"></span> New {{item.name}}</b-button>

                                <b-button class="btn btn-outline-secondary btn-sm buttonBackground" :id="'edit '+item.name" @click="editCompModal(item.name, item.index, $event.target)"><span class="fa fa-edit"></span> Edit {{item.name}}</b-button>

                                <b-button class="btn btn-outline-danger btn-sm buttonBackground" :id="'delete '+item.name" @click="delCompModal(item.name, $event.target)"><span class="fa fa-trash-o"></span> Delete {{item.name}}</b-button>

                              </b-card-body>
                            </b-collapse>
                          </b-card>
                        </div>

                        <!-- Editar componente -->
                        <b-modal id ="modalEditComponent" :title = "modalEditComponent.title" ok-title="Edit" @ok="editCompVerify($event, modalEditComponent.element)" ref="editComponent">

                          <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                            <span class="fa fa-info-circle"></span> {{alertMessaje}}
                          </b-alert>

                          <b-form>
                            <b-form-group id="editComponentName" label="Name:">
                              <b-form-input id="editComponentNameInput" type="text" :state="valid(formArchitecture.name)" v-model="formArchitecture.name" required placeholder="Enter name" size="sm">
                              </b-form-input>
                            </b-form-group>
                          </b-form>
                        </b-modal >

                        <!-- Nuevo elemento -->
                        <b-modal id ="modalNewElement" :title = "modalNewElement.title" ok-title="Create" @ok="newElementVerify($event, modalNewElement.element)" ref="newElement">

                          <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                            <span class="fa fa-info-circle"></span> {{alertMessaje}}
                          </b-alert>

                          <b-form >
                            <b-form-group id="newElementName" label="Name:">
                              <b-form-input id="newElementNameInput" type="text" :state="valid(formArchitecture.name)" v-model="formArchitecture.name" required placeholder="Enter name" size="sm">
                              </b-form-input>
                            </b-form-group>
                            <b-form-group id="newElementDefValue" label="Default value:" v-if="modalNewElement.double_precision == false">
                              <b-form-input id="newElementDefValueInput" type="text" :state="valid(formArchitecture.defValue)" v-model="formArchitecture.defValue" required placeholder="Enter default value" size="sm">
                              </b-form-input>
                            </b-form-group>
                            <b-form-group id="newElementProperties" v-if="modalNewElement.type != 'control'">
                              <b-form-checkbox-group v-model="formArchitecture.properties" id="newElementPropertiesInput">
                                <b-form-checkbox value="read">Read</b-form-checkbox>
                                <b-form-checkbox value="write">Write</b-form-checkbox>
                              </b-form-checkbox-group>
                            </b-form-group>
                            <b-form-group id="newElementSimple" label="Simple Floating Points asociate:" v-if="modalNewElement.double_precision == true">
                              <div class="col-lg-12 col-sm-12 row nomargin">
                                <div class="col-lg-6 col-sm-6">
                                  <b-form-select id="newElementSimple1" required v-model="formArchitecture.simple1" :state="valid(formArchitecture.simple1)" size="sm" :options="simple_reg"></b-form-select>
                                </div>
                                <div class="col-lg-6 col-sm-6">
                                  <b-form-select id="newElementSimple2" required v-model="formArchitecture.simple2" :state="valid(formArchitecture.simple2)" size="sm" :options="simple_reg"></b-form-select>
                                </div>
                              </div>
                            </b-form-group>
                          </b-form>
                        </b-modal >

                        <!-- Editar elemento -->
                        <b-modal id ="modalEditElement" :title="modalEditElement.title" ok-title="Edit" @ok="editElementVerify($event, modalEditElement.element)" ref="editElement">

                          <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                            <span class="fa fa-info-circle"></span> {{alertMessaje}}
                          </b-alert>

                          <b-form>
                            <b-form-group id="editElementName" label="Name:">
                              <b-form-input id="editElementNameInput" type="text" v-model="formArchitecture.name" required placeholder="Enter name" :state="valid(formArchitecture.name)" size="sm">
                              </b-form-input>
                            </b-form-group>
                            <b-form-group id="editElementDefValue" label="Default value:" v-if="modalEditElement.double_precision == false">
                              <b-form-input id="editElementDefValueInput" type="text" v-model="formArchitecture.defValue" required placeholder="Enter default value" :state="valid(formArchitecture.defValue)" size="sm">
                              </b-form-input>
                            </b-form-group>
                            <b-form-group id="editElementProperties">
                              <b-form-checkbox-group v-model="formArchitecture.properties" id="editElementPropertiesInput" v-if="modalEditElement.type != 'control'">
                                <b-form-checkbox value="read">Read</b-form-checkbox>
                                <b-form-checkbox value="write">Write</b-form-checkbox>
                              </b-form-checkbox-group>
                            </b-form-group>

                            <b-form-group id="editElementSimple" label="Simple Floating Points asociate:" v-if="modalEditElement.double_precision == true">
                              <div class="col-lg-12 col-sm-12 row nomargin">
                                <div class="col-lg-6 col-sm-6">
                                  <b-form-select id="editElementSimple1" required v-model="formArchitecture.simple1" :state="valid(formArchitecture.simple1)" size="sm" :options="simple_reg"></b-form-select>
                                </div>
                                <div class="col-lg-6 col-sm-6">
                                  <b-form-select id="editElementSimple2" required v-model="formArchitecture.simple2" :state="valid(formArchitecture.simple2)" size="sm" :options="simple_reg"></b-form-select>
                                </div>
                              </div>
                            </b-form-group>

                          </b-form>
                        </b-modal >

                        <!-- Borrar elemento -->
                        <b-modal id ="modalDeletElement" :title="modalDeletElement.title" ok-variant="danger" ok-title="Delete" @ok="delElement(modalDeletElement.element)">
                          <h6>Are you sure you want to delete the item?</h6>
                        </b-modal >

                        <!-- Borrar componente -->
                        <b-modal id ="modalDeletComp" :title="modalDeletComp.title" ok-variant="danger" ok-title="Delete" @ok="delComponent(modalDeletComp.element)">
                          <h6>Are you sure you want to delete the component?</h6>
                        </b-modal >

                      </div>

                      <b-modal id ="new_component" title = "New component" ok-title="Create" @ok="newComponentVerify" ref="newComponent">

                        <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                          <span class="fa fa-info-circle"></span> {{alertMessaje}}
                        </b-alert>

                        <b-form>
                          <b-form-group id="newComponentName" label="Name:">
                            <b-form-input id="newComponentNameInput" type="text" v-model="formArchitecture.name" required placeholder="Enter name" :state="valid(formArchitecture.name)" size="sm">
                            </b-form-input>
                          </b-form-group>
                          <b-form-group id="newComponentType" label="Type:">
                            <b-form-select id="newComponentTypeInput" :options="componentsTypes" required v-model="formArchitecture.type" :state="valid(formArchitecture.type)" size="sm"></b-form-select>
                          </b-form-group>
                          <b-form-group id="newComponentPrecision" v-if="formArchitecture.type == 'floating point'">
                            <b-form-checkbox-group v-model="formArchitecture.precision" id="newComponentPrecisionInput">
                              <b-form-checkbox value="precision">Double Precision</b-form-checkbox>
                            </b-form-checkbox-group>
                          </b-form-group>
                        </b-form>
                      </b-modal >
                    </b-tab>

                    <b-tab title="Instructions Definition" >
                      <br>
                      <h6>Instruction set:</h6>

                      <b-button class="btn btn-outline-secondary btn-sm buttonBackground" id="newInstructionBtn" v-b-modal.new_instruction> <span class="fa fa-plus-circle"></span> New instruction</b-button>

                      <b-button class="btn btn-outline-danger btn-sm buttonBackground" id="resetInstructions" @click="resetInstModal(architecture_name, $event)"> <span class="fa fa-power-off"></span> Reset Instructions</b-button>

                      <!-- Resetea las instrucciones -->
                      <b-modal id ="modalResetInst" :title="modalResetInst.title" ok-variant="danger" ok-title="Reset" @ok="resetInstructions(modalResetInst.element)">
                        <h6>Are you sure you want to reset the instructions?</h6>
                      </b-modal >

                      <div class="col-lg-12 col-sm-12 architecture-scroll-y" style="margin-top: 3vh">
                        <b-table small :items="architecture.instructions" :fields="instFields" class="instruction_table">
                          <template slot="fields" slot-scope="row">
                            <b-form-select :id="'fieldsSel-'+row.item.name" required v-model="fieldsSel" class="fieldsSel" size="sm">
                              <option v-for="i in row.item.fields" :value="i.name">{{i.name}}</option>
                            </b-form-select>

                            <div v-for="i in row.item.fields" v-if="(fieldsSel == i.name) && (instSel == row.item.name)">
                              <br>
                              <h6 class="instruction_table">Name: {{i.name}}</h6>
                              <h6 class="instruction_table">Type: {{i.type}}</h6>
                              <h6 class="instruction_table">Start Bit: {{i.startbit}}</h6>
                              <h6 class="instruction_table">End Bit: {{i.stopbit}}</h6>
                            </div>
                          </template>

                          <template slot="actions" slot-scope="row">
                            <b-button @click.stop="editInstModal(row.item.name, row.item.co, row.item.cop, $event.target)" class="btn btn-outline-secondary btn-sm buttonBackground"><span class="fa fa-edit"></span> Edit</b-button>
                            <b-button @click.stop="delInstModal(row.item.name, row.index, $event.target)" class="btn btn-outline-danger btn-sm buttonBackground"><span class="fa fa-trash-o"></span> Delete</b-button> 
                          </template>
                         </b-table>

                         <!-- Borrar instruccion -->
                        <b-modal id ="modalDeletInst" :title="modalDeletInst.title" ok-variant="danger" ok-title="Delete" @ok="delInstruction(modalDeletInst.index)">
                          <h6>Are you sure you want to delete the item?</h6>
                        </b-modal >

                        <!-- Formulario para editar una instruccion -->
                        <b-modal size="lg" id ="modalEditInst" :title="modalEditInst.title" ok-title="Edit" @ok="editInstVerify($event, modalEditInst.element, modalEditInst.co, modalEditInst.cop)" ref="editInst">
                          <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                            <span class="fa fa-info-circle"></span> {{alertMessaje}}
                          </b-alert>

                          <b-form>
                            <div id="editInstForm1" v-if="instructionFormPage == 1">
                              <b-form-group id="editInstructionName" label="Name:">
                                <b-form-input id="editInstructionNameInput" type="text" v-model="formInstruction.name" required placeholder="Enter name" :state="valid(formInstruction.name)" size="sm">
                                </b-form-input>
                              </b-form-group>

                              <b-form-group id="editInstructionNwords" label="Number of Words:">
                                <b-form-input id="editInstructionNwordsInput" type="number" min="1" v-model="formInstruction.nwords" required placeholder="Enter nwords" :state="valid(formInstruction.nwords)" size="sm">
                                </b-form-input>
                              </b-form-group>

                              <b-form-group id="editNumFields" label="Number of fields: (Including co and cop)">
                                <b-form-input id="editNumFieldsInput" type="number" min="1" v-model="formInstruction.numfields" required placeholder="Enter number of fields" :state="valid(formInstruction.numfields)" size="sm">
                                </b-form-input>
                              </b-form-group>
                            </div>

                            <div id="editInstForm2" v-if="instructionFormPage == 2">
                              <div class="col-lg-12 col-sm-12 row">
                                <div class="col-lg-2 col-2 fields">
                                  
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Name:</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Type</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Start Bit</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>End Bit</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Value</h6>
                                </div>
                              </div>

                              <div v-for="i in parseInt(formInstruction.numfields)">
                                <div class="col-lg-12 col-sm-12 row">
                                  <div class="col-lg-2 col-2 fields">
                                    <h6>Field {{i-1}}</h6>
                                  </div>
                                  <div class="col-lg-2 col-2 fields">
                                    <b-form-group :id="'nameField'+i">
                                      <b-form-input :id="'nameField'+i" type="text" v-model="formInstruction.nameField[i-1]" required :state="valid(formInstruction.nameField[i-1])" size="sm" v-if="(i-1) != 0">
                                      </b-form-input>
                                      <b-form-input :id="'nameField'+i" type="text" v-model="formInstruction.nameField[i-1]=formInstruction.name" required size="sm" v-if="(i-1) == 0"  disabled>
                                      </b-form-input>
                                    </b-form-group>
                                  </div>
                                  <div class="col-lg-2 col-2 fields">
                                    <b-form-group :id="'typeField'+i">
                                      <b-form-select id="'typeField'+i" v-model="formInstruction.typeField[i-1]" required :state="valid(formInstruction.typeField[i-1])" size="sm" v-if="(i-1) != 0">
                                        <option value="reg">reg</option>
                                        <option value="inm">inm</option>
                                        <option value="address">address</option>
                                        <option value="(reg)">reg-add<r/option>
                                        <option value="cop" :disabled="formInstruction.assignedCop!=false">cop</option>
                                      </b-form-select>
                                      <b-form-input :id="'typeField'+i" type="text" v-model="formInstruction.typeField[i-1]='co'" required size="sm" v-if="(i-1) == 0" disabled>
                                      </b-form-input>
                                    </b-form-group>
                                  </div>
                                  <div class="col-lg-2 col-2 fields">
                                    <b-form-group :id="'startBitField'+i">
                                      <b-form-input id="'startBitField'+i" type="number" min="0" v-model="formInstruction.startBitField[i-1]" required :state="valid(formInstruction.startBitField[i-1])" size="sm">
                                      </b-form-input>
                                    </b-form-group>
                                  </div>
                                  <div class="col-lg-2 col-2 fields">
                                    <b-form-group :id="'stopBitField'+i">
                                      <b-form-input id="'stopBitField'+i" type="number" min="0" v-model="formInstruction.stopBitField[i-1]" required :state="valid(formInstruction.stopBitField[i-1])" size="sm">
                                      </b-form-input>
                                    </b-form-group>
                                  </div>
                                  <div class="col-lg-2 col-2 fields" v-if="formInstruction.typeField[i-1] == 'co'">
                                    <b-form-group :id="'valueFieldCo'+i">
                                      <b-form-input :id="'valueFieldCo'+i" type="text" v-model="formInstruction.co" required :state="valid(formInstruction.co)" size="sm">
                                      </b-form-input>
                                    </b-form-group>
                                  </div>
                                  <div class="col-lg-2 col-2 fields" v-if="formInstruction.typeField[i-1] == 'cop'">
                                    <b-form-group :id="'valueFieldCo'+i">
                                      <b-form-input :id="'valueFieldCo'+i" type="text" v-model="formInstruction.cop" required :state="valid(formInstruction.cop)" size="sm">
                                      </b-form-input>
                                    </b-form-group>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div id="editInstForm3" v-if="instructionFormPage == 3">
                              <b-form-group id="editInstructionDefinition" label="Assembly Definition:">
                                <b-form-textarea id="editInstructionDefinitionInput" v-model="formInstruction.definition" placeholder="Example: reg1=reg2+reg3" :state="valid(formInstruction.definition)" :rows="4">
                                </b-form-textarea>
                              </b-form-group>
                            </div>
                          </b-form>

                          <hr>
                          <b-pagination-nav size="sm" align="center" base-url="#" :number-of-pages="3" v-model="instructionFormPage" :link-gen="linkGen" :page-gen="pageGen"></b-pagination-nav>
                        </b-modal>
                      </div>

                      <!-- Formulario nueva instruccion -->
                      <b-modal size="lg" id ="new_instruction" title = "New instruction" ok-title="Create" @ok="newInstVerify" ref="newInst">

                        <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                          <span class="fa fa-info-circle"></span> {{alertMessaje}}
                        </b-alert>

                        <b-form>
                          <div id="newInstForm1" v-if="instructionFormPage == 1">
                            <b-form-group id="newInstructionName" label="Name:">
                              <b-form-input id="newInstructionNameInput" type="text" v-model="formInstruction.name" required placeholder="Enter name" :state="valid(formInstruction.name)" size="sm">
                              </b-form-input>
                            </b-form-group>

                            <b-form-group id="newInstructionNwords" label="Number of Words:">
                              <b-form-input id="newInstructionNwordsInput" type="number" min="1" v-model="formInstruction.nwords" required placeholder="Enter nwords" :state="valid(formInstruction.nwords)" size="sm">
                              </b-form-input>
                            </b-form-group>

                            <b-form-group id="newNumFields" label="Number of fields: (Including co and cop)">
                              <b-form-input id="newNumFieldsInput" type="number" min="1" v-model="formInstruction.numfields" required placeholder="Enter number of fields" :state="valid(formInstruction.numfields)" size="sm">
                              </b-form-input>
                            </b-form-group>
                          </div>

                          <div id="newInstForm2" v-if="instructionFormPage == 2">
                            <div class="col-lg-12 col-sm-12 row">
                              <div class="col-lg-2 col-2 fields">
                                
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>Name:</h6>
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>Type</h6>
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>Start Bit</h6>
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>End Bit</h6>
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>Value</h6>
                              </div>
                            </div>

                            <div v-for="i in parseInt(formInstruction.numfields)">
                              <div class="col-lg-12 col-sm-12 row">
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Field {{i-1}}</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <b-form-group :id="'nameField'+i">
                                    <b-form-input :id="'nameField'+i+'Input'" type="text" v-model="formInstruction.nameField[i-1]" required :state="valid(formInstruction.nameField[i-1])" size="sm" v-if="(i-1) != 0">
                                    </b-form-input>
                                    <b-form-input :id="'nameField'+i" type="text" v-model="formInstruction.nameField[i-1]=formInstruction.name" required size="sm" v-if="(i-1) == 0"  disabled>
                                    </b-form-input>
                                  </b-form-group>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <b-form-group :id="'typeField'+i">
                                    <b-form-select id="'typeField'+i+'Input'" v-model="formInstruction.typeField[i-1]" required :state="valid(formInstruction.typeField[i-1])" size="sm" v-if="(i-1) != 0">
                                      <option value="reg">reg</option>
                                      <option value="inm">inm</option>
                                      <option value="address">address</option>
                                      <option value="(reg)">reg-addr</option>
                                      <option value="cop" :disabled="formInstruction.assignedCop!=false">cop</option>
                                    </b-form-select>
                                    <b-form-input :id="'typeField'+i" type="text" v-model="formInstruction.typeField[i-1]='co'" required size="sm" v-if="(i-1) == 0" disabled>
                                    </b-form-input>
                                  </b-form-group>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <b-form-group :id="'startBitField'+i">
                                    <b-form-input id="'startBitField'+i+'Input'" type="number" min="0" v-model="formInstruction.startBitField[i-1]" required :state="valid(formInstruction.startBitField[i-1])" size="sm">
                                    </b-form-input>
                                  </b-form-group>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <b-form-group :id="'stopBitField'+i">
                                    <b-form-input id="'stopBitField'+i+'Input'" type="number" min="0" v-model="formInstruction.stopBitField[i-1]" required :state="valid(formInstruction.stopBitField[i-1])" size="sm">
                                    </b-form-input>
                                  </b-form-group>
                                </div>
                                <div class="col-lg-2 col-2 fields" v-if="formInstruction.typeField[i-1] == 'co'">
                                  <b-form-group :id="'valueFieldCo'+i">
                                    <b-form-input :id="'valueFieldCo'+i+'Input'" type="text" v-model="formInstruction.co" required :state="valid(formInstruction.co)" size="sm">
                                    </b-form-input>
                                  </b-form-group>
                                </div>
                                <div class="col-lg-2 col-2 fields" v-if="formInstruction.typeField[i-1] == 'cop'">
                                  <b-form-group :id="'valueFieldCo'+i">
                                    <b-form-input :id="'valueFieldCo'+i+'Input'" type="text" v-model="formInstruction.cop" required :state="valid(formInstruction.cop)" size="sm">
                                    </b-form-input>
                                  </b-form-group>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div id="newInstForm3" v-if="instructionFormPage == 3">
                            <b-form-group id="newInstructionDefinition" label="Assembly Definition:">
                              <b-form-textarea id="newInstructionDefinitionInput" v-model="formInstruction.definition" placeholder="Example: reg1=reg2+reg3" :state="valid(formInstruction.definition)" :rows="4">
                              </b-form-textarea>
                            </b-form-group>
                          </div>
                        </b-form>

                        <hr>
                        <b-pagination-nav size="sm" align="center" base-url="#" :number-of-pages="3" v-model="instructionFormPage" :link-gen="linkGen" :page-gen="pageGen"></b-pagination-nav>

                      </b-modal >
                    </b-tab>

                    <b-tab title="Pseudoinstructions Definition" >
                      <br>
                      <h6>Pseudoinstructions set:</h6>

                      <b-button class="btn btn-outline-secondary btn-sm buttonBackground" id="newPseudoinstructionsBtn" v-b-modal.new_pseudoinstruction> <span class="fa fa-plus-circle"></span> New pseudoinstructions</b-button>

                      <b-button class="btn btn-outline-danger btn-sm buttonBackground" id="resetPseudoinstructions" @click="resetPseudoinstModal(architecture_name, $event)"> <span class="fa fa-power-off"></span> Reset pseudoinstructions</b-button>

                      <!-- Resetea las pseudoinstrucciones -->
                      <b-modal id ="modalResetPseudoinst" :title="modalResetPseudoinst.title" ok-variant="danger" ok-title="Reset" @ok="resetPseudoinstructionsModal(modalResetPseudoinst.element)">
                        <h6>Are you sure you want to reset the pseudoinstructions?</h6>
                      </b-modal >

                      <div class="col-lg-12 col-sm-12 architecture-scroll-y" style="margin-top: 3vh">
                        <b-table small :items="architecture.pseudoinstructions" :fields="pseudoinstFields" class="instruction_table">
                          <template slot="fields" slot-scope="row">
                            <b-form-select :id="'fieldsSel-'+row.item.name" required v-model="fieldsSel" class="fieldsSel" size="sm">
                              <option v-for="i in row.item.fields" :value="i.name">{{i.name}}</option>
                            </b-form-select>

                            <div v-for="i in row.item.fields" v-if="(fieldsSel == i.name) && (instSel == row.item.name)">
                              <br>
                              <h6 class="instruction_table">Name: {{i.name}}</h6>
                              <h6 class="instruction_table">Type: {{i.type}}</h6>
                              <h6 class="instruction_table">Start Bit: {{i.startbit}}</h6>
                              <h6 class="instruction_table">End Bit: {{i.stopbit}}</h6>
                            </div>
                          </template>

                          <template slot="actions" slot-scope="row">
                            <b-button @click.stop="editPseudoinstModal(row.item.name, row.index, $event.target)" class="btn btn-outline-secondary btn-sm buttonBackground"><span class="fa fa-edit"></span> Edit</b-button>
                            <b-button @click.stop="delPseudoinstModal(row.item.name, row.index, $event.target)" class="btn btn-outline-danger btn-sm buttonBackground"><span class="fa fa-trash-o"></span> Delete</b-button> 
                          </template>
                        </b-table>

                        <!-- Borrar pseudoinstruccion -->
                        <b-modal id ="modalDeletPseudoinst" :title="modalDeletPseudoinst.title" ok-variant="danger" ok-title="Delete" @ok="delPseudoinstruction(modalDeletPseudoinst.index)">
                          <h6>Are you sure you want to delete the item?</h6>
                        </b-modal >

                        <!-- Formulario para editar una instruccion -->
                        <b-modal size="lg" id ="modalEditPseudoinst" :title="modalEditPseudoinst.title" ok-title="Edit" @ok="editPseudoinstVerify($event, modalEditPseudoinst.element, modalEditPseudoinst.index)" ref="editPseudoinst">
                          <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                            <span class="fa fa-info-circle"></span> {{alertMessaje}}
                          </b-alert>

                          <b-form>
                            <div id="editPseudoinstForm1" v-if="instructionFormPage == 1">
                              <b-form-group id="editPseudoinstructionName" label="Name:">
                                <b-form-input id="editPseudoinstructionNameInput" type="text" v-model="formInstruction.name" required placeholder="Enter name" :state="valid(formInstruction.name)" size="sm">
                                </b-form-input>
                              </b-form-group>

                              <b-form-group id="editPseudoinstructionNwords" label="Number of Words:">
                                <b-form-input id="editPseudoinstructionNwordsInput" type="number" min="1" v-model="formInstruction.nwords" required placeholder="Enter nwords" :state="valid(formInstruction.nwords)" size="sm">
                                </b-form-input>
                              </b-form-group>

                              <b-form-group id="editNumFields" label="Number of fields: ">
                                <b-form-input id="editNumFieldsInput" type="number" min="1" v-model="formInstruction.numfields" required placeholder="Enter number of fields" :state="valid(formInstruction.numfields)" size="sm">
                                </b-form-input>
                              </b-form-group>
                            </div>

                            <div id="editPseudoinstForm2" v-if="instructionFormPage == 2">
                              <div class="col-lg-12 col-sm-12 row">
                                <div class="col-lg-2 col-2 fields">
                                  
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Name:</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Type</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Start Bit</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>End Bit</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Value</h6>
                                </div>
                              </div>

                              <div v-for="i in parseInt(formInstruction.numfields)">
                                <div class="col-lg-12 col-sm-12 row">
                                  <div class="col-lg-2 col-2 fields">
                                    <h6>Field {{i-1}}</h6>
                                  </div>
                                  <div class="col-lg-2 col-2 fields">
                                    <b-form-group :id="'nameField'+i">
                                      <b-form-input :id="'nameField'+i" type="text" v-model="formInstruction.nameField[i-1]" required :state="valid(formInstruction.nameField[i-1])" size="sm">
                                      </b-form-input>
                                    </b-form-group>
                                  </div>
                                  <div class="col-lg-2 col-2 fields">
                                    <b-form-group :id="'typeField'+i">
                                      <b-form-select id="'typeField'+i" v-model="formInstruction.typeField[i-1]" required :state="valid(formInstruction.typeField[i-1])" size="sm">
                                        <option value="reg">reg</option>
                                        <option value="inm">inm</option>
                                        <option value="address">address</option>
                                        <option value="(reg)">reg-addr</option>
                                      </b-form-select>
                                    </b-form-group>
                                  </div>
                                  <div class="col-lg-2 col-2 fields">
                                    <b-form-group :id="'startBitField'+i">
                                      <b-form-input id="'startBitField'+i" type="number" min="0" v-model="formInstruction.startBitField[i-1]" required :state="valid(formInstruction.startBitField[i-1])" size="sm">
                                      </b-form-input>
                                    </b-form-group>
                                  </div>
                                  <div class="col-lg-2 col-2 fields">
                                    <b-form-group :id="'stopBitField'+i">
                                      <b-form-input id="'stopBitField'+i" type="number" min="0" v-model="formInstruction.stopBitField[i-1]" required :state="valid(formInstruction.stopBitField[i-1])" size="sm">
                                      </b-form-input>
                                    </b-form-group>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div id="editPseudoinstForm3" v-if="instructionFormPage == 3">
                              <b-form-group id="editPseudoinstructionDefinition" label="Assembly Definition:">
                                <b-form-textarea id="editPseudoinstructionDefinitionInput" v-model="formInstruction.definition" placeholder="Example: add reg1 reg0 reg2" :state="valid(formInstruction.definition)" :rows="4">
                                </b-form-textarea>
                              </b-form-group>
                            </div>
                          </b-form>

                          <hr>
                          <b-pagination-nav size="sm" align="center" base-url="#" :number-of-pages="3" v-model="instructionFormPage" :link-gen="linkGen" :page-gen="pageGen"></b-pagination-nav>
                        </b-modal>
                      </div>

                      <!-- Formulario nueva instruccion -->
                      <b-modal size="lg" id ="new_pseudoinstruction" title = "New pseudoinstruction" ok-title="Create" @ok="newPseudoinstVerify" ref="newInst">

                        <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                          <span class="fa fa-info-circle"></span> {{alertMessaje}}
                        </b-alert>

                        <b-form>
                          <div id="newPseudoinstForm1" v-if="instructionFormPage == 1">
                            <b-form-group id="newPseudoinstructionName" label="Name:">
                              <b-form-input id="newPseudoinstructionNameInput" type="text" v-model="formInstruction.name" required placeholder="Enter name" :state="valid(formInstruction.name)" size="sm">
                              </b-form-input>
                            </b-form-group>

                            <b-form-group id="newPseudoinstructionNwords" label="Number of Words:">
                              <b-form-input id="newPseudoinstructionNwordsInput" type="number" min="1" v-model="formInstruction.nwords" required placeholder="Enter nwords" :state="valid(formInstruction.nwords)" size="sm">
                              </b-form-input>
                            </b-form-group>

                            <b-form-group id="newNumFields" label="Number of fields: ">
                              <b-form-input id="newNumFieldsInput" type="number" min="0" v-model="formInstruction.numfields" required placeholder="Enter number of fields" :state="valid(formInstruction.numfields)" size="sm">
                              </b-form-input>
                            </b-form-group>
                          </div>

                          <div id="newPseudoinstForm2" v-if="instructionFormPage == 2">
                            <div class="col-lg-12 col-sm-12 row">
                              <div class="col-lg-2 col-2 fields">
                                
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>Name:</h6>
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>Type</h6>
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>Start Bit</h6>
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>End Bit</h6>
                              </div>
                              <div class="col-lg-2 col-2 fields">
                                <h6>Value</h6>
                              </div>
                            </div>

                            <div v-for="i in parseInt(formInstruction.numfields)">
                              <div class="col-lg-12 col-sm-12 row">
                                <div class="col-lg-2 col-2 fields">
                                  <h6>Field {{i-1}}</h6>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <b-form-group :id="'nameField'+i">
                                    <b-form-input :id="'nameField'+i+'Input'" type="text" v-model="formInstruction.nameField[i-1]" required :state="valid(formInstruction.nameField[i-1])" size="sm">
                                    </b-form-input>
                                  </b-form-group>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <b-form-group :id="'typeField'+i">
                                    <b-form-select id="'typeField'+i+'Input'" v-model="formInstruction.typeField[i-1]" required :state="valid(formInstruction.typeField[i-1])" size="sm">
                                      <option value="reg">reg</option>
                                      <option value="inm">inm</option>
                                      <option value="address">address</option>
                                      <option value="(reg)">reg-addr</option>
                                    </b-form-select>
                                  </b-form-group>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <b-form-group :id="'startBitField'+i">
                                    <b-form-input id="'startBitField'+i+'Input'" type="number" min="0" v-model="formInstruction.startBitField[i-1]" required :state="valid(formInstruction.startBitField[i-1])" size="sm">
                                    </b-form-input>
                                  </b-form-group>
                                </div>
                                <div class="col-lg-2 col-2 fields">
                                  <b-form-group :id="'stopBitField'+i">
                                    <b-form-input id="'stopBitField'+i+'Input'" type="number" min="0" v-model="formInstruction.stopBitField[i-1]" required :state="valid(formInstruction.stopBitField[i-1])" size="sm">
                                    </b-form-input>
                                  </b-form-group>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div id="newPseudoinstForm3" v-if="instructionFormPage == 3">
                            <b-form-group id="newInstructionDefinition" label="Assembly Definition:">
                              <b-form-textarea id="newInstructionDefinitionInput" v-model="formInstruction.definition" placeholder="Example: add reg1 reg0 reg2" :state="valid(formInstruction.definition)" :rows="4">
                              </b-form-textarea>
                            </b-form-group>
                          </div>
                        </b-form>

                        <hr>
                        <b-pagination-nav size="sm" align="center" base-url="#" :number-of-pages="3" v-model="instructionFormPage" :link-gen="linkGen" :page-gen="pageGen"></b-pagination-nav>

                      </b-modal >
                    </b-tab>

                    <b-tab title="Directives Definition" >
                      <br>
                      <h6>Directives set:</h6>

                      <div class="col-lg-12 col-sm-12 row">
                        <div class="compMenu">
                          <b-button class="btn btn-outline-secondary btn-sm buttonBackground" id="newDirectiveBtn" v-b-modal.new_directive> <span class="fa fa-plus-circle"></span> New directive</b-button>
                        </div>

                        <div class="compMenu">
                          <b-button class="btn btn-outline-danger btn-sm buttonBackground" id="resetDirectives" @click="resetDirModal(architecture_name, $event)"> <span class="fa fa-power-off"></span> Reset directives</b-button>
                        </div>
                      </div>

                      <b-modal size="lg" id ="new_directive" title = "New directive" ok-title="Create" @ok="newDirVerify($event)" ref="newDir">
                        <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                          <span class="fa fa-info-circle"></span> {{alertMessaje}}
                        </b-alert>

                        <b-form>
                          <b-form-group id="newDirectiveName" label="Name:">
                            <b-form-input id="newDirectiveNameInput" type="text" :state="valid(formDirective.name)" v-model="formDirective.name" required placeholder="Enter name" size="sm">
                            </b-form-input>
                          </b-form-group>

                          <b-form-group id="newDirectiveKindof" label="Kindof:">
                            <b-form-select id="newDirectiveKindofInput" :options="kindofTypes" required v-model="formDirective.kindof" :state="valid(formDirective.kindof)" size="sm"></b-form-select>
                          </b-form-group>

                          <b-form-group id="newDirectiveSize" label="Size:">
                            <b-form-input id="newDirectiveSizeInput" type="number" :state="valid(formDirective.size)" v-model="formDirective.size" required placeholder="Enter size" size="sm" min="0">
                            </b-form-input>
                          </b-form-group>
                        </b-form>
                      </b-modal >

                      <!-- Resetea las directivas -->
                      <b-modal id ="modalResetDir" :title="modalResetDir.title" ok-variant="danger" ok-title="Reset" @ok="resetDirectives(modalResetDir.element)">
                        <h6>Are you sure you want to reset the directives set?</h6>
                      </b-modal >

                      <div class="col-lg-12 col-sm-12 architecture-scroll-y" style="margin-top: 3vh">
                        <b-table small :items="architecture.directives" :fields="directivesFields" class="instruction_table">
                          <template slot="actions" slot-scope="row" class="">
                            <b-button @click.stop="editDirModal(row.item.name, $event.target)" class="btn btn-outline-secondary btn-sm buttonBackground"><span class="fa fa-edit"></span> Edit</b-button>
                            <b-button @click.stop="delDirModal(row.item.name, $event.target)" class="btn btn-outline-danger btn-sm buttonBackground"><span class="fa fa-trash-o"></span> Delete</b-button> 
                          </template>
                        </b-table>

                        <!-- Borrar directiva -->
                        <b-modal id ="modalDeletDir" :title="modalDeletDir.title" ok-variant="danger" ok-title="Delete" @ok="delDirective(modalDeletDir.element)">
                          <h6>Are you sure you want to delete the item?</h6>
                        </b-modal >

                        <!-- Editar directiva -->
                        <b-modal id ="modalEditDirective" :title = "modalEditDirective.title" ok-title="Edit" @ok="editDirVerify($event, modalEditDirective.element)" ref="editDirective">

                          <b-alert :show="dismissCountDownMod" dismissible :variant="type" @dismissed="dismissCountDownMod=0" @dismiss-count-down="countDownChangedMod" style=" position: fixed;">
                            <span class="fa fa-info-circle"></span> {{alertMessaje}}
                          </b-alert>

                          <b-form>
                            <b-form-group id="editDirectiveName" label="Name:">
                              <b-form-input id="editDirectiveNameInput" type="text" :state="valid(formDirective.name)" v-model="formDirective.name" required placeholder="Enter name" size="sm">
                              </b-form-input>
                            </b-form-group>

                            <b-form-group id="editDirectiveKindof" label="Kindof:">
                              <b-form-select id="editDirectiveKindofInput" :options="kindofTypes" required v-model="formDirective.kindof" :state="valid(formDirective.kindof)" size="sm"></b-form-select>
                            </b-form-group>

                            <b-form-group id="editDirectiveSize" label="Size:">
                              <b-form-input id="editDirectiveSizeInput" type="number" :state="valid(formDirective.size)" v-model="formDirective.size" required placeholder="Enter size" size="sm" min="0">
                              </b-form-input>
                            </b-form-group>

                          </b-form>
                        </b-modal >
                      </div>
                    </b-tab>

                  </b-tabs>
                </div>
              </div>
            </div>
          </div>
        </div>










        <div class="contenedor row" id="simulator" style="display:none;">
	        	<!-- 2 navbar -->
	          <div class="contenedor menu row">
	            <div class="col-lg-3 col-sm-12 nopadding">
	              <div class="col-lg-12 col-sm-12">
	                <div class="col-lg-12 col-sm-12 buttons row">
	                  <div class="col-lg-6 col-sm-6 buttons">
	                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm arch_btn" id="arch_btn_sim">Architecture</b-button>
	                  </div>
	                  <div class="col-lg-6 col-sm-6 buttons">
	                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm assembly_btn" id="assembly_btn_sim">Assembly</b-button>
	                  </div>
	                </div>
	              </div>
	            </div>

	            <div class="col-lg-4 col-sm-12">

	            </div>

	            <div class="col-lg-5 col-sm-12 nopadding">
	              <div class="col-lg-12 col-sm-12">
	                <div class="col-lg-12 col-sm-12 buttons row">
	                	<div class="col-lg-4 col-sm-4 buttons">
	                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm" id="conf_btn_sim"><span class="fa fa-gear"></span> Configuration</b-button>
	                  </div>
	                  <div class="col-lg-4 col-sm-4 buttons">
                      <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm">Examples</b-button>
	                  </div>
	                  <div class="col-lg-4 col-sm-4 buttons">
	                    <b-button class="btn btn-outline-secondary btn-block btn-sm" style="background-color:#D4DB17;"><span class="fa fa-exclamation-circle"></span> Help</b-button>
	                  </div>
	                </div>
	              </div>
	            </div>
	          </div>
            <!-- Tabla -->
            <div class="col-lg-7 col-sm-12">
              <div class="col-lg-12 col-sm-12 table-inst-wrapper-scroll-y ">
                <b-table striped small hover :items="instructions" :fields="archInstructions" class="instructions_table" @row-clicked="breakPoint" style="cursor: pointer;">
                  <template slot="Break" slot-scope="row">
                    <div class="break" :id="row.index">
                      <br v-if="row.item.Break == null">
                      <img alt="Break" src="./images/stop_classic.gif" style="height:3vh" v-if="row.item.Break == true">
                    </div>
                  </template>

                  <template slot="User Instructions" slot-scope="row">
                    {{row.item.user}}
                  </template>

                  <template slot="Loaded Instructions" slot-scope="row">
                    {{row.item.loaded}}
                  </template> 
                </b-table>
              </div>
            </div>

            <!-- lateral datos -->
            <div class="col-lg-5 col-sm-12">
              <div class="col-lg-12 col-sm-12">
                <div class="col-lg-12 col-sm-12 buttons row">
                  <div class="col-lg-4 col-sm-4 buttons">
                    <b-button @click="reset()" class="btn btn-outline-secondary btn-block actionsGroup btn-sm">
                      <span class="fa fa-power-off"></span>
                      Reset
                    </b-button>
                  </div>
                  <div class="col-lg-4 col-sm-4 buttons">
                    <b-button class="btn btn-outline-secondary btn-block actionsGroup btn-sm" @click="executeInstruction">
                      <span class="fa fa-fast-forward"></span>
                      Inst.
                    </b-button>
                  </div>
                  <div class="col-lg-4 col-sm-4 buttons">
                    <b-button class="btn btn-outline-secondary btn-block actionsGroup btn-sm" @click="executeProgram">
                      <span class="fa fa-play"></span>
                      Run
                    </b-button>
                  </div>
                </div>
              </div>

              <div class="col-lg-12 col-sm-12">
                <div class="col-lg-12 col-sm-12 buttons row">
                  <div class="col-lg-4 col-sm-4 buttons">
                  	<select class="form-control border border-secondary form-control-sm" style="background-color: white; color: black, " id="selectData">
                      <option value="CPU-INT Registers">  CPU-INT Registers</option>
                      <option value="CPU-FP Registers">  CPU-FP Registers</option>
                      <option value="CPU-Stats">  CPU-Stats</option>
                    </select>
                  </div>
                  <div class="col-lg-4 col-sm-4 buttons">
                    <b-button class="btn btn-outline-secondary btn-block opcionsGroup btn-sm" id="memory_btn">
                      Memory 
                    </b-button>
                  </div>
                  <div class="col-lg-4 col-sm-4 buttons">
                    <b-button class="btn btn-outline-secondary btn-block opcionsGroup btn-sm">
                      <span class="fa fa-refresh"></span>
                      Refresh 
                    </b-button>
                  </div>
                </div>
                <hr>
              </div>

              <div class="col-lg-12 col-sm-12" id="registers">
              	<div class="col-lg-12 col-sm-12 nopadding" v-for="item in architecture_hash">
              		<div class="col-lg-12 col-sm-12 buttons row" style="margin-bottom: 2vh;" v-if="(register_type == architecture.components[item.index].type) || (register_type == 'integer' && architecture.components[item.index].type == 'control')">
              			<!-- Estructura si los numeros son enteros -->
	                  <div class="col-lg-4 col-sm-4 buttons" v-for="item2 in architecture.components[item.index].elements" v-if="(architecture.components[item.index].type == 'integer') || (architecture.components[item.index].type == 'control')">
	                    <b-button class="btn btn-outline-secondary btn-block btn-sm registers" :id="popoverId(item2.name)">
	                       {{item2.name}}  <b-badge style="background-color:#CEECF5; color:black; font-family: monospace;" :id="item2.name" class="regValue">{{(((item2.value).toString(16)).padStart(item2.nbits/4, "0")).toUpperCase()}}</b-badge>
	                    </b-button>

	                    <b-popover :target="popoverId(item2.name)" :title="item2.name" triggers="click blur" class="popover">
												<table class="table table-bordered table-sm popoverText">
												  <tbody>
												    <tr>
												      <td>Hex.</td>
												      <td><b-badge style="background-color:#CEECF5; color:black;">{{"0x"+(((item2.value).toString(16)).padStart(item2.nbits/4, "0")).toUpperCase()}}</b-badge></td>
												    </tr>
												    <tr>
												      <td>Binary</td>
												      <td><b-badge style="background-color:#CEECF5; color:black;">{{(((item2.value).toString(2)).padStart(item2.nbits, "0"))}}</b-badge></td>
												    </tr>
												    <tr>
												      <td>Signed</td>
												      <td><b-badge style="background-color:#CEECF5; color:black;">{{(item2.value).toString(10) >> 0}}</b-badge></td>
												    </tr>
												    <tr>
												      <td>Unsig.</td>
												      <td><b-badge style="background-color:#CEECF5; color:black;">{{(item2.value).toString(10) >>> 0}}</b-badge></td>
												    </tr>
												    <tr>
												      <td>Char</td>
												      <td><b-badge style="background-color:#CEECF5; color:black;">{{hex2char8((((item2.value).toString(16)).padStart(item2.nbits/4, "0")))}}</b-badge></td>
												    </tr>
												    <tr>
												      <td>Float</td>
												      <td><b-badge style="background-color:#CEECF5; color:black;">{{hex2float("0x"+(((item2.value).toString(16)).padStart(item2.nbits/4, "0")))}}</b-badge></td>
												    </tr>
												  </tbody>
												</table>

												<div class="col-lg-12 col-sm-12 row" style="margin-right: 0px;margin-left: 0px;">
					            		<div class="col-lg-6 col-sm-6 popoverFooter">
					            			<b-form-input v-model="newValue" type="text" size="sm"></b-form-input>
					            		</div>
					            		<div class="col-lg-6 col-sm-6 popoverFooter">
					            			<b-button class="btn btn-primary btn-block btn-sm" @click="updateReg(item.index, item2.name, architecture.components[item.index].type)">Update</b-button>
					            		</div>
				            		</div>
								      </b-popover>
	                  </div>

	                  <div class="col-lg-4 col-sm-4 buttons" v-for="item2 in architecture.components[item.index].elements" v-if="architecture.components[item.index].type == 'floating point'">
	                  	<!-- Estructura si los numeros son FP simple -->
	                  	<div class="col-lg-12 col-sm-12 nopadding" v-if="architecture.components[item.index].double_precision == false">
	                  		<b-button class="btn btn-outline-secondary btn-block btn-sm registers" :id="popoverId(item2.name)">
	                      	{{item2.name}}  <b-badge style="background-color:#CEECF5; color:black; font-family: monospace;" :id="item2.name">{{bin2hex(float2bin(item2.value))}}</b-badge>
		                    </b-button>

		                    <b-popover :target="popoverId(item2.name)" :title="item2.name" triggers="click blur">
													<table class="table table-bordered table-sm popoverText">
													  <tbody>
													    <tr>
													      <td>Hex.</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{"0x"+ bin2hex(float2bin(item2.value))}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Binary</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{float2bin(item2.value)}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Signed</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{parseInt(item2.value.toString(), 10) >> 0}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Unsig.</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{parseInt(item2.value.toString(), 10) >>> 0}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Char</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{hex2char8(((bin2hex(float2bin(item2.value)))))}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Float</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{item2.value}}</b-badge></td>
													    </tr>
													  </tbody>
													</table>

													<div class="col-lg-12 col-sm-12 row" style="margin-right: 0px;margin-left: 0px;">
						            		<div class="col-lg-6 col-sm-6 popoverFooter">
						            			<b-form-input v-model="newValue" type="text" size="sm"></b-form-input>
						            		</div>
						            		<div class="col-lg-6 col-sm-6 popoverFooter">
						            			<b-button class="btn btn-primary btn-block btn-sm" @click="updateReg(item.index, item2.name, architecture.components[item.index].type, architecture.components[item.index].double_precision)">Update</b-button>
						            		</div>
					            		</div>
									      </b-popover>
	                  	</div>

	                  	<!-- Estructura si los numeros son FP doble -->
	                  	<div class="col-lg-12 col-sm-12 nopadding" v-if="architecture.components[item.index].double_precision == true">
	                  		<b-button class="btn btn-outline-secondary btn-block btn-sm registers" :id="popoverId(item2.name)">
		                       {{item2.name}}  <b-badge style="background-color:#CEECF5; color:black; font-family: monospace;" :id="item2.name">{{bin2hex(double2bin(item2.value))}}</b-badge>
		                    </b-button>

		                    <b-popover :target="popoverId(item2.name)" :title="item2.name" triggers="click blur">
													<table class="table table-bordered table-sm popoverText">
													  <tbody>
													    <tr>
													      <td>Hex.</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{"0x"+ bin2hex(double2bin(item2.value))}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Binary</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{double2bin(item2.value)}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Signed</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{parseInt(item2.value.toString(), 10) >> 0}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Unsig.</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{parseInt(item2.value.toString(), 10) >>> 0}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Char</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{hex2char8(((bin2hex(double2bin(item2.value)))))}}</b-badge></td>
													    </tr>
													    <tr>
													      <td>Float</td>
													      <td><b-badge style="background-color:#CEECF5; color:black;">{{item2.value}}</b-badge></td>
													    </tr>
													  </tbody>
													</table>

													<div class="col-lg-12 col-sm-12 row" style="margin-right: 0px;margin-left: 0px;">
						            		<div class="col-lg-6 col-sm-6 popoverFooter">
						            			<b-form-input v-model="newValue" type="text" size="sm"></b-form-input>
						            		</div>
						            		<div class="col-lg-6 col-sm-6 popoverFooter">
						            			<b-button class="btn btn-primary btn-block btn-sm" @click="updateReg(item.index, item2.name, architecture.components[item.index].type, architecture.components[item.index].double_precision)">Update</b-button>
						            		</div>
					            		</div>
									      </b-popover>
	                  	</div> 
	                  </div>
	                </div>
                </div>
              </div>

              <!-- MM-Memory-->
              <div class="col-lg-12 col-sm-12" id="memory" style="display:none;">
                <div class="col-lg-12 col-sm-12 table-mem-wrapper-scroll-y ">
                  <b-table striped small hover :items="memory" :fields="memFields" class="memory_table">
                    <template slot="Address" slot-scope="row">
                      <h6 style="font-size: 13px">0x{{((row.item.Address + 3).toString(16)).padStart(row.item.Address.length-2, "0")}} - 0x{{(row.item.Address.toString(16)).padStart(row.item.Address.length-2, "0")}}</h6>
                    </template>
                    <template slot="Binary" slot-scope="row">
                      <h6 style="font-size: 13px">
                        <span style="border:1px solid gray;" v-if="row.item.Binary[3].Tag != null">{{row.item.Binary[3].Bin}}</span> <span v-if="row.item.Binary[3].Tag == null">{{row.item.Binary[3].Bin}}</span> <b-badge pill variant="info">{{row.item.Binary[3].Tag}}</b-badge>
                        <span style="border:1px solid gray;" v-if="row.item.Binary[2].Tag != null">{{row.item.Binary[2].Bin}}</span> <span v-if="row.item.Binary[2].Tag == null">{{row.item.Binary[2].Bin}}</span> <b-badge pill variant="info">{{row.item.Binary[2].Tag}}</b-badge>
                        <span style="border:1px solid gray;" v-if="row.item.Binary[1].Tag != null">{{row.item.Binary[1].Bin}}</span> <span v-if="row.item.Binary[1].Tag == null">{{row.item.Binary[1].Bin}}</span> <b-badge pill variant="info">{{row.item.Binary[1].Tag}}</b-badge>
                        <span style="border:1px solid gray;" v-if="row.item.Binary[0].Tag != null">{{row.item.Binary[0].Bin}}</span> <span v-if="row.item.Binary[0].Tag == null">{{row.item.Binary[0].Bin}}</span> <b-badge pill variant="info">{{row.item.Binary[0].Tag}}</b-badge>
                      </h6>
                    </template>
                    <template slot="Value" slot-scope="row">
                      
                    </template>
                  </b-table>
                </div>
              </div>
            </div>
        </div>

        <div class="contenedor row" id="assembly" style="display:none;">
      		<!-- 2 navbar -->
          <div class="contenedor menu row">
            <div class="col-lg-3 col-sm-12 nopadding">
              <div class="col-lg-12 col-sm-12">
                <div class="col-lg-12 col-sm-12 buttons row">
                  <div class="col-lg-6 col-sm-6 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm arch_btn" id="arch_btn_assembly">Architecture</b-button>
                  </div>
                  <div class="col-lg-6 col-sm-6 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm simulator_btn" id="simulator_btn_assembly">Simulator</b-button>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-2 col-sm-12 nopadding">
							<div class="col-lg-12 col-sm-12">
                <div class="col-lg-12 col-sm-12 buttons row">
                  <div class="col-lg-6 col-sm-4 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm" id="load_assembly_btn" v-b-modal.load_assembly><span class="fa fa-upload"></span> Load</b-button>
                  </div>
                  <div class="col-lg-6 col-sm-4 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm" id="save_assembly_btn" v-b-modal.save_assembly><span class="fa fa-download"></span> Save</b-button>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-4 col-sm-12 nopadding">
							<div class="col-lg-12 col-sm-12">
                <div class="col-lg-12 col-sm-12 buttons row">
                  <div class="col-lg-3 col-sm-4 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm" id="compile_assembly" @click="assembly_compiler()"><span class="fa fa-sign-in"></span> Compile</b-button>
                  </div>
                  <div class="col-lg-9 col-sm-4 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm" id="show_assembly"><span class="fa fa-microchip"></span> Show Main Memory</b-button>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-3 col-sm-12 nopadding">
            	<div class="col-lg-12 col-sm-12">
                <div class="col-lg-12 col-sm-12 buttons row">
                	<div class="col-lg-8 col-sm-8 buttons">
                    <b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm" id="conf_btn_assembly"><span class="fa fa-gear"></span> Configuration</b-button>
                  </div>
              		<div class="col-lg-4 col-sm-4 buttons">
                		<b-button class="btn btn-outline-secondary btn-block menuGroup btn-sm" id="help_assembly" style="background-color:#D4DB17;"><span class="fa fa-exclamation-circle"></span> Help</b-button>
              		</div>
            		</div>
              </div>
            </div>
          </div>

          <div class="contenedor menu row">
          	<div class="col-lg-12 col-sm-12">
          		<h5>Assembly:</h5>
          	</div>
          	<div class="col-lg-12 col-sm-12">
          		<b-form-textarea id="textarea_assembly" v-model="text_assembly" :rows="11" class="code-scroll-y">
  						</b-form-textarea>
          	</div>
          </div>

          <b-modal  id = "load_assembly"   title = "Load Assembly" ok-title="Load from this File" @ok="assembly_update">
				    <p> Please select the assembly file to be loaded </p> 
				    <b-form-file v-model="load_assembly" :state="Boolean(load_assembly)" placeholder="Choose a file..." accept=".txt" @change="read_assembly" id="assembly_file"></b-form-file>
				  </b-modal>

				  <b-modal  id = "save_assembly"   title = "Save Assembly" ok-title="Save to File" @ok="assembly_save">
				    <p> Please write the file name: </p> 
				    <b-form-input v-model="save_assembly"
                type="text"
                placeholder="File name where assembly will be saved">
            </b-form-input>
				  </b-modal>

          <!--Modal error al compilar-->
          <b-modal  id = "modalAssemblyError" title = "Assembly Code Error" ref="errorAssembly" hide-footer>
            <div style="padding: 3%; background: #EF9A9A;">
              <h6>...</h6>
              <h6>  {{modalAssemblyError.code1}}</h6>
              <h6>* {{modalAssemblyError.code2}}</h6>
              <h6>  {{modalAssemblyError.code3}}</h6>
              <h6>...</h6>
            </div>
            <br>
            <h6>{{modalAssemblyError.error}}</h6>
            <br>
          </b-modal>

        </div>
      </template>
    </div>

    <script src="js/app.js"></script>
    <script src="js/buttons_actions.js"></script>

  </body>
</html>
